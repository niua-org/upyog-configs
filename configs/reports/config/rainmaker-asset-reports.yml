---
ReportDefinitions:
  - reportName: AssetapplicationReport
    decryptionPathId: ObpsDailyCollectionReport
    summary: Asset Application Report
    version: 1.0.0
    moduleName: rainmaker-asset
    sourceColumns:
      - name: applicationno
        label: Asset Unique ID
        type: string
        source: asset
        total: false
      - name: AssetClassification
        label: Asset Classification
        type: string
        source: asset
        total: false
        isLocalisationRequired: true
      - name: parentcategory
        label: Parent Category
        type: string
        source: asset
        total: false
      - name: subcategory
        label: Sub Category
        type: string
        source: asset
        total: false
        isLocalisationRequired: true
      - name: AssetStatus
        label: Asset Status
        type: string
        source: asset
        isLocalisationRequired: true
        total: false
      - name: Department
        label: Department
        type: string
        source: asset
        total: false
        isLocalisationRequired: true
      - name: lifeofasset
        label: Life of Asset
        type: string
        source: asset
        total: false
      - name: FinancialYear
        label: Financial Year
        type: string
        source: asset
        total: false
      - name: createdtime
        label: Created Time
        type: string
        source: asset
        showColumn: false
    searchParams:
      - name: applicationno
        label: Asset Unique ID
        type: string
        source: asset
        isMandatory: false
        searchClause: AND b.applicationno = $applicationno
      - name: AssetClassification
        label: Asset Classification
        type: singlevaluelist
        pattern: 'list://MOVABLE:Movable,IMMOVABLE:Immovable'
        source: asset
        wrapper: true
        isMandatory: false
        searchClause: AND b.classification = $AssetClassification
      - name: parentcategory
        label: Parent Category
        type: singlevaluelist
        pattern: 'list://LAND:Land,BUILDING:Building,SERVICE:Service,IT:IT,VEHICLE:Vehicle,OTHER:Other'
        source: asset
        wrapper: true
        isMandatory: false
        searchClause: AND b.parentcategory = $parentcategory
      - name: AssetStatus
        label: Asset Status
        type: singlevaluelist
        pattern: 'list://REJECTED:Rejected,APPROVED:Approved,INITIATED:Initiated,VERIFIED:Verified' 
        source: asset
        wrapper: true
        isMandatory: false
        searchClause: AND b.status = $AssetStatus
      - name: Department
        label: Department
        type: singlevaluelist
        pattern: 'list://DEPT_1:Street Lights,DEPT_2:Building & Roads,DEPT_3:Health & Sanitation,DEPT_4:Operation & Maintenance,DEPT_5:Horticulture,DEPT_6:Building Branch,DEPT_7:Citizen service desk,DEPT_8:Complaint Cell,DEPT_9:Executive Branch,DEPT_10:Others,DEPT_11:Project Branch,DEPT_12:Birth and Death Branch,DEPT_13:Tax Branch,DEPT_14:Civil,DEPT_15:Engineering Branch (O&M - W&S),DEPT_16:Health Branch,DEPT_17:Tehbazri Branch,DEPT_18:Engineering Branch,DEPT_19:Advertisement Branch,DEPT_21:Sanitation Branch,DEPT_24:Fire Brigade Department,DEPT_25:Accounts Branch,DEPT_33:Property Tax Branch,DEPT_34:Establishment Branch,DEPT_35:Works Branch,DEPT_38:General Branch,DEPT_53:Architect & Planning (A&P) Branch DEPT,DEPT_54:Estate Branch,DEPT_55:Veterinary public health office (V.P.H.O.),DEPT_56:Law Branch,TRADE_BRANCH:Trade License Branch,DEPT_LG:Legal Branch,AGENDA_BRANCH:Agenda Branch,CARETAKER_BRANCH:Caretaker Branch,IT_BRANCH:IT Branch,DEPT_TP:Townplanning,DEPT_57:Tender Cell'
        source: asset
        wrapper: true
        isMandatory: false
        searchClause: AND b.department = $Department
      - name: fromDate
        label: FromDate
        type: epoch
        source: asset
        isMandatory: false
        searchClause: AND b.createdtime >= $fromDate
      - name: toDate
        label: ToDate
        type: epoch
        source: asset
        isMandatory: false
        searchClause: AND b.createdtime <= $toDate
    query: >
      SELECT 
        b.applicationno AS applicationno,
        b.bookrefno AS bookrefno,
        b.classification AS AssetClassification, 
        b.parentcategory AS parentcategory, 
        b.lifeofasset AS lifeofasset, 
        b.subcategory AS subcategory,
        b.name AS Assetname, 
        b.status AS AssetStatus,
        CONCAT('COMMON_MASTERS_DEPARTMENT_', b.department) AS Department,
        b.financialyear AS FinancialYear, 
        b.createdtime AS createdtime 
        FROM 
        eg_asset_assetdetails b
        WHERE 
        1 = 1
  - reportName: AssetapplicationReportULBwise
    decryptionPathId: ObpsDailyCollectionReport
    summary: Asset Application Report
    version: 1.0.0
    moduleName: rainmaker-asset
    sourceColumns:
      - name: applicationno
        label: Asset Unique ID
        type: string
        source: asset
        total: false
      - name: bookrefno
        label: Book Reference No
        type: string
        source: asset
        total: false
      - name: AssetClassification
        label: Asset Classification
        type: string
        source: asset
        total: false
      - name: parentcategory
        label: Parent Category
        type: string
        source: asset
        total: false
      - name: subcategory
        label: Sub Category
        type: string
        source: asset
        total: false
        isLocalisationRequired: true
      - name: AssetStatus
        label: Asset Status
        type: string
        source: asset
        isLocalisationRequired: true
        total: false
      - name: Department
        label: Department
        type: string
        source: asset
        total: false
        isLocalisationRequired: true
      - name: lifeofasset
        label: Life of Asset
        type: string
        source: asset
        total: false
      - name: tenantid
        label: tenantd
        type: string
        source: asset
        total: false
        showColumn: true
      - name: FinancialYear
        label: Financial Year
        type: string
        source: asset
        total: false
      - name: createdtime
        label: Created Time
        type: string
        source: asset
        showColumn: false
    searchParams:
      - name: applicationno
        label: Asset Unique ID
        type: string
        source: asset
        isMandatory: false
        searchClause: AND b.applicationno = $applicationno
      - name: AssetClassification
        label: Asset Classification
        type: singlevaluelist
        pattern: 'list://MOVABLE:Movable,IMMOVABLE:Immovable'
        source: asset
        wrapper: true
        isMandatory: false
        searchClause: AND b.classification = $AssetClassification
      - name: parentcategory
        label: Parent Category
        type: singlevaluelist
        pattern: 'list://LAND:Land,BUILDING:Building,SERVICE:Service,IT:IT,VEHICLE:Vehicle,OTHER:Other'
        source: asset
        wrapper: true
        isMandatory: false
        searchClause: AND b.parentcategory = $parentcategory
      - name: AssetStatus
        label: Asset Status
        type: singlevaluelist
        pattern: 'list://REJECTED:Rejected,APPROVED:Approved,INITIATED:Initiated,VERIFIED:Verified' 
        source: asset
        wrapper: true
        isMandatory: false
        searchClause: AND b.status = $AssetStatus
      - name: Department
        label: Department
        type: singlevaluelist
        pattern: 'list://DEPT_1:Street Lights,DEPT_2:Building & Roads,DEPT_3:Health & Sanitation,DEPT_4:Operation & Maintenance,DEPT_5:Horticulture,DEPT_6:Building Branch,DEPT_7:Citizen service desk,DEPT_8:Complaint Cell,DEPT_9:Executive Branch,DEPT_10:Others,DEPT_11:Project Branch,DEPT_12:Birth and Death Branch,DEPT_13:Tax Branch,DEPT_14:Civil,DEPT_15:Engineering Branch (O&M - W&S),DEPT_16:Health Branch,DEPT_17:Tehbazri Branch,DEPT_18:Engineering Branch,DEPT_19:Advertisement Branch,DEPT_21:Sanitation Branch,DEPT_24:Fire Brigade Department,DEPT_25:Accounts Branch,DEPT_33:Property Tax Branch,DEPT_34:Establishment Branch,DEPT_35:Works Branch,DEPT_38:General Branch,DEPT_53:Architect & Planning (A&P) Branch DEPT,DEPT_54:Estate Branch,DEPT_55:Veterinary public health office (V.P.H.O.),DEPT_56:Law Branch,TRADE_BRANCH:Trade License Branch,DEPT_LG:Legal Branch,AGENDA_BRANCH:Agenda Branch,CARETAKER_BRANCH:Caretaker Branch,IT_BRANCH:IT Branch,DEPT_TP:Townplanning,DEPT_57:Tender Cell'
        source: asset
        wrapper: true
        isMandatory: false
        searchClause: AND b.department = $Department
      - name: ulb
        label: ULB
        type: singlevaluelist
        source: asset
        wrapper: true
        isMandatory: false
        pattern: http://egov-mdms-service:8080/egov-mdms-service/v1/_get?tenantId=$tenantid&moduleName=tenant&masterName=tenants|$.MdmsRes.tenant.tenants.*.code|$.MdmsRes.tenant.tenants.*.city.name
        searchClause: AND b.tenantid = $ulb     
      - name: fromDate
        label: FromDate
        type: epoch
        source: asset
        isMandatory: false
        searchClause: AND b.createdtime >= $fromDate
      - name: toDate
        label: ToDate
        type: epoch
        source: asset
        isMandatory: false
        searchClause: AND b.createdtime <= $toDate
    query: |
        SELECT 
        b.applicationno AS applicationno,
        b.bookrefno AS bookrefno,
        b.classification AS AssetClassification, 
        b.parentcategory AS parentcategory, 
        b.subcategory AS subcategory,
        b.lifeofasset AS lifeofasset, 
        b.name AS Assetname, 
        b.status AS AssetStatus,
        CONCAT('COMMON_MASTERS_DEPARTMENT_', b.department) AS Department,
        b.financialyear AS FinancialYear, 
        b.createdtime AS createdtime, b.tenantid AS tenantid
        FROM 
        eg_asset_assetdetails b
        WHERE 
        1 = 1
    orderby: ORDER BY b.tenantId asc

  - reportName: AssetAssignmentReport
    decryptionPathId: ObpsDailyCollectionReport
    summary: Asset Assignment Report
    version: 1.0.0
    moduleName: rainmaker-asset
    sourceColumns:
      - name: applicationno
        label: Asset Unique ID
        type: string
        source: asset
        total: false
      - name: parentcategory
        label: Parent Category 
        type: string
        source: asset
        total: false
      - name: subcategory
        label: Sub Category 
        type: string
        source: asset
        total: false
        isLocalisationRequired: true
      - name: bookValue
        label: Book Value 
        type: string
        source: asset
        total: false
      - name: tenantid
        label: tenantid
        type: string
        source: asset
        total: false
        showColumn: false
      - name: employeecode
        label: Employee Code
        type: string
        source: asset
        total: false
      - name: assignedusername
        label: Assigned User Name
        type: string
        source: asset
        total: false
      - name: department
        label: Department
        type: string
        source: asset
        total: false
        isLocalisationRequired: true
      - name: createdtime
        label: Created Time
        type: string
        source: asset
        showColumn: false 
      - name: status
        label: Current Status
        type: string
        source: asset
        total: false
        isLocalisationRequired: true
      - name: isassigned
        label: Is Assigned
        type: string
        source: asset
        total: false 
      - name: returndate
        label: Return Date
        type: epoch
        source: asset
        total: false
      - name: assigneddate
        label: Assignment Date
        type: epoch
        source: asset
        total: false     
    searchParams:
      - name: applicationno
        label: Asset Unique ID
        type: string
        source: asset
        isMandatory: false
        searchClause: AND b.applicationno = $applicationno
      - name: AssetClassification
        label: Asset Classification
        type: singlevaluelist
        pattern: 'list://MOVABLE:Movable,IMMOVABLE:Immovable'
        source: asset
        wrapper: true
        isMandatory: false
        searchClause: AND b.classification = $AssetClassification
      - name: parentcategory
        label: Parent Category
        type: singlevaluelist
        pattern: 'list://LAND:Land,BUILDING:Building,SERVICE:Service,IT:IT,VEHICLE:Vehicle,OTHER:Other'
        source: asset
        wrapper: true
        isMandatory: false
        searchClause: AND b.parentcategory = $parentcategory
      - name: AssetStatus
        label: Asset Status
        type: singlevaluelist
        pattern: 'list://REJECTED:Rejected,APPROVED:Approved,INITIATED:Initiated,VERIFIED:Verified' 
        source: asset
        wrapper: true
        isMandatory: false
        searchClause: AND b.status = $AssetStatus
      - name: Department
        label: Department
        type: singlevaluelist
        pattern: 'list://DEPT_1:Street Lights,DEPT_2:Building & Roads,DEPT_3:Health & Sanitation,DEPT_4:Operation & Maintenance,DEPT_5:Horticulture,DEPT_6:Building Branch,DEPT_7:Citizen service desk,DEPT_8:Complaint Cell,DEPT_9:Executive Branch,DEPT_10:Others,DEPT_11:Project Branch,DEPT_12:Birth and Death Branch,DEPT_13:Tax Branch,DEPT_14:Civil,DEPT_15:Engineering Branch (O&M - W&S),DEPT_16:Health Branch,DEPT_17:Tehbazri Branch,DEPT_18:Engineering Branch,DEPT_19:Advertisement Branch,DEPT_21:Sanitation Branch,DEPT_24:Fire Brigade Department,DEPT_25:Accounts Branch,DEPT_33:Property Tax Branch,DEPT_34:Establishment Branch,DEPT_35:Works Branch,DEPT_38:General Branch,DEPT_53:Architect & Planning (A&P) Branch DEPT,DEPT_54:Estate Branch,DEPT_55:Veterinary public health office (V.P.H.O.),DEPT_56:Law Branch,TRADE_BRANCH:Trade License Branch,DEPT_LG:Legal Branch,AGENDA_BRANCH:Agenda Branch,CARETAKER_BRANCH:Caretaker Branch,IT_BRANCH:IT Branch,DEPT_TP:Townplanning,DEPT_57:Tender Cell'
        source: asset
        wrapper: true
        isMandatory: false
        searchClause: AND b.department = $Department
      - name: fromDate
        label: FromDate
        type: epoch
        source: asset
        isMandatory: false
        searchClause: AND b.createdtime >= $fromDate
      - name: toDate
        label: ToDate
        type: epoch
        source: asset
        isMandatory: false
        searchClause: AND b.createdtime <= $toDate
    query: >
      SELECT 
        bb.applicationno AS applicationno,
        b.parentcategory AS parentcategory,
        b.subcategory AS subcategory,
        b.bookValue AS bookValue, 
        b.tenantid AS tenantid,
        bb.assignedusername AS assignedusername,
        CONCAT('COMMON_MASTERS_DEPARTMENT_', b.department) AS department,
        bb.employeecode AS employeecode,
        b.createdtime AS createdtime,
        b.status AS status,CASE WHEN bb.isassigned THEN 'Yes' 
        ELSE 'No' 
        END AS isassigned,TO_TIMESTAMP(bb.returndate / 1000) AS returndate,
        TO_TIMESTAMP(bb.assigneddate / 1000) AS assigneddate
        FROM 
        eg_asset_assignmentdetails bb
        JOIN 
        eg_asset_assetdetails b ON bb.applicationno = b.applicationno
        WHERE 
        1=1

  - reportName: AssetDisposalReport
    decryptionPathId: ObpsDailyCollectionReport
    summary: Asset Disposal Report
    version: 1.0.0
    moduleName: rainmaker-asset
    sourceColumns:
      - name: applicationno
        label: Asset Unique ID
        type: string
        source: asset
        total: false
        isLocalisationRequired: true
      - name: parentcategory
        label: Parent Category 
        type: string
        source: asset
        total: false
        isLocalisationRequired: true
      - name: category
        label: Category 
        type: string
        source: asset
        total: false
        isLocalisationRequired: true
      - name: bookValue
        label: Book Value 
        type: string
        source: asset
        total: true
      - name: tenantid
        label: tenantid
        type: string
        source: asset
        total: false
        showColumn: false
      - name: department
        label: Department
        type: string
        source: asset
        total: false
        isLocalisationRequired: true
      - name: lifeofasset
        label: Life of Asset
        type: string
        source: asset
        total: false
      - name: reasonfordisposal
        label: Reason for Disposal
        type: string
        source: asset
        showColumn: false 
      - name: purchasername
        label: Purchaser Name
        type: string
        source: asset
        total: false
      - name: amountreceived
        label: Amount Received
        type: string
        source: asset
        total: true 
      - name: comments
        label: Comments
        type: string
        source: asset
        total: false
      - name: disposaldate
        label: Disposal Date
        type: epoch
        source: asset
        total: false     
    searchParams:
      - name: applicationno
        label: Asset Unique ID
        type: string
        source: asset
        isMandatory: false
        searchClause: AND b.applicationno = $applicationno
      - name: AssetClassification
        label: Asset Classification
        type: singlevaluelist
        pattern: 'list://MOVABLE:Movable,IMMOVABLE:Immovable'
        source: asset
        wrapper: true
        isMandatory: false
        searchClause: AND b.classification = $AssetClassification
      - name: parentcategory
        label: Parent Category
        type: singlevaluelist
        pattern: 'list://LAND:Land,BUILDING:Building,SERVICE:Service,IT:IT,VEHICLE:Vehicle,OTHER:Other'
        source: asset
        wrapper: true
        isMandatory: false
        searchClause: AND b.parentcategory = $parentcategory
      - name: AssetStatus
        label: Asset Status
        type: singlevaluelist
        pattern: 'list://REJECTED:Rejected,APPROVED:Approved,INITIATED:Initiated,VERIFIED:Verified' 
        source: asset
        wrapper: true
        isMandatory: false
        searchClause: AND b.status = $AssetStatus
      - name: Department
        label: Department
        type: singlevaluelist
        pattern: 'list://DEPT_1:Street Lights,DEPT_2:Building & Roads,DEPT_3:Health & Sanitation,DEPT_4:Operation & Maintenance,DEPT_5:Horticulture,DEPT_6:Building Branch,DEPT_7:Citizen service desk,DEPT_8:Complaint Cell,DEPT_9:Executive Branch,DEPT_10:Others,DEPT_11:Project Branch,DEPT_12:Birth and Death Branch,DEPT_13:Tax Branch,DEPT_14:Civil,DEPT_15:Engineering Branch (O&M - W&S),DEPT_16:Health Branch,DEPT_17:Tehbazri Branch,DEPT_18:Engineering Branch,DEPT_19:Advertisement Branch,DEPT_21:Sanitation Branch,DEPT_24:Fire Brigade Department,DEPT_25:Accounts Branch,DEPT_33:Property Tax Branch,DEPT_34:Establishment Branch,DEPT_35:Works Branch,DEPT_38:General Branch,DEPT_53:Architect & Planning (A&P) Branch DEPT,DEPT_54:Estate Branch,DEPT_55:Veterinary public health office (V.P.H.O.),DEPT_56:Law Branch,TRADE_BRANCH:Trade License Branch,DEPT_LG:Legal Branch,AGENDA_BRANCH:Agenda Branch,CARETAKER_BRANCH:Caretaker Branch,IT_BRANCH:IT Branch,DEPT_TP:Townplanning,DEPT_57:Tender Cell'
        source: asset
        wrapper: true
        isMandatory: false
        searchClause: AND b.department = $Department
      - name: fromDate
        label: FromDate
        type: epoch
        source: asset
        isMandatory: false
        searchClause: AND n.disposal_date >= $fromDate
      - name: toDate
        label: ToDate
        type: epoch
        source: asset
        isMandatory: false
        searchClause: AND n.disposal_date <= $toDate
    query: >
      SELECT 
        b.applicationno AS applicationno,
        b.parentcategory AS parentcategory,
        CONCAT(COALESCE(b.bookValue, 0)) AS bookValue,
        b.category AS category,
        b.tenantid AS tenantid,
        CONCAT('COMMON_MASTERS_DEPARTMENT_', b.department) AS department,
        n.amount_received as amountreceived,
        n.reason_for_disposal as reasonfordisposal,
        n.comments as comments,
        n.life_of_asset as lifeofasset,
        n.purchaser_name as purchasername,
        n.disposal_date as disposaldate
        FROM 
        eg_asset_assetdetails b, eg_asset_disposal_details n where b.id=n.asset_id
        AND 
        1=1
        
  - reportName: AssetMaintenanceReport
    decryptionPathId: ObpsDailyCollectionReport
    summary: Asset Maintenance Report
    version: 1.0.0
    moduleName: rainmaker-asset
    sourceColumns:
      - name: applicationno
        label: Asset Unique ID
        type: string
        source: asset
        total: false
      - name: parentcategory
        label: Parent Category 
        type: string
        source: asset
        total: false
      - name: category
        label: Category 
        type: string
        source: asset
        total: false
        isLocalisationRequired: true
      - name: tenantid
        label: tenantid
        type: string
        source: asset
        total: false
        showColumn: false
      - name: department
        label: Department
        type: string
        source: asset
        total: false
        isLocalisationRequired: true
      - name: maintenance_type
        label: Maintenance Type
        type: string
        source: asset
        total: false
        isLocalisationRequired: true
      - name: cost_of_maintenance
        label: Cost of Maintenance
        type: string
        source: asset
        showColumn: false 
      - name: warranty_status
        label: Warranty Status
        type: string
        source: asset
        total: false
        isLocalisationRequired: true
      - name: is_amc_expired
        label: Is AMC Expired
        type: string
        source: asset
        total: false 
      - name: payment_type
        label: Payment Type
        type: string
        source: asset
        total: false
        isLocalisationRequired: true
      - name: vendor
        label: Vendor
        type: string
        source: asset
        total: false
      - name: parts_added_or_replaced
        label: Parts Added or Replaced
        type: string
        source: asset
        total: false
      - name: created_time
        label: Created Time
        type: epoch
        source: asset
        total: false               
    searchParams:
      - name: applicationno
        label: Asset Unique ID
        type: string
        source: asset
        isMandatory: false
        searchClause: AND b.applicationno = $applicationno
      - name: AssetClassification
        label: Asset Classification
        type: singlevaluelist
        pattern: 'list://MOVABLE:Movable,IMMOVABLE:Immovable'
        source: asset
        wrapper: true
        isMandatory: false
        searchClause: AND b.classification = $AssetClassification
      - name: parentcategory
        label: Parent Category
        type: singlevaluelist
        pattern: 'list://LAND:Land,BUILDING:Building,SERVICE:Service,IT:IT,VEHICLE:Vehicle,OTHER:Other'
        source: asset
        wrapper: true
        isMandatory: false
        searchClause: AND b.parentcategory = $parentcategory
      - name: AssetStatus
        label: Asset Status
        type: singlevaluelist
        pattern: 'list://REJECTED:Rejected,APPROVED:Approved,INITIATED:Initiated,VERIFIED:Verified' 
        source: asset
        wrapper: true
        isMandatory: false
        searchClause: AND b.status = $AssetStatus
      - name: Department
        label: Department
        type: singlevaluelist
        pattern: 'list://DEPT_1:Street Lights,DEPT_2:Building & Roads,DEPT_3:Health & Sanitation,DEPT_4:Operation & Maintenance,DEPT_5:Horticulture,DEPT_6:Building Branch,DEPT_7:Citizen service desk,DEPT_8:Complaint Cell,DEPT_9:Executive Branch,DEPT_10:Others,DEPT_11:Project Branch,DEPT_12:Birth and Death Branch,DEPT_13:Tax Branch,DEPT_14:Civil,DEPT_15:Engineering Branch (O&M - W&S),DEPT_16:Health Branch,DEPT_17:Tehbazri Branch,DEPT_18:Engineering Branch,DEPT_19:Advertisement Branch,DEPT_21:Sanitation Branch,DEPT_24:Fire Brigade Department,DEPT_25:Accounts Branch,DEPT_33:Property Tax Branch,DEPT_34:Establishment Branch,DEPT_35:Works Branch,DEPT_38:General Branch,DEPT_53:Architect & Planning (A&P) Branch DEPT,DEPT_54:Estate Branch,DEPT_55:Veterinary public health office (V.P.H.O.),DEPT_56:Law Branch,TRADE_BRANCH:Trade License Branch,DEPT_LG:Legal Branch,AGENDA_BRANCH:Agenda Branch,CARETAKER_BRANCH:Caretaker Branch,IT_BRANCH:IT Branch,DEPT_TP:Townplanning,DEPT_57:Tender Cell'
        source: asset
        wrapper: true
        isMandatory: false
        searchClause: AND b.department = $Department
      - name: fromDate
        label: FromDate
        type: epoch
        source: asset
        isMandatory: false
        searchClause: AND h.created_time >= $fromDate
      - name: toDate
        label: ToDate
        type: epoch
        source: asset
        isMandatory: false
        searchClause: AND h.created_time <= $toDate
    query: >
      SELECT    
      b.applicationno AS applicationno,
      b.parentcategory AS parentcategory,
        b.category AS category,
        b.tenantid AS tenantid,
        CONCAT('COMMON_MASTERS_DEPARTMENT_', b.department) AS department,
        h.maintenance_type,
        h.cost_of_maintenance,
        h.warranty_status,
        CASE WHEN h.is_amc_expired = true THEN 'Yes' ELSE 'No' END as is_amc_expired,
        h.payment_type,
        h.vendor,
        h.parts_added_or_replaced,
        h.created_time
        FROM 
        eg_asset_assetdetails b, eg_asset_maintenance h where b.id=h.asset_id
        AND 
        1=1   
  - reportName: AssetCountReport
    decryptionPathId: ObpsDailyCollectionReport
    summary: Asset Count Report
    version: 1.0.0
    moduleName: rainmaker-asset
    sourceColumns:
      - name: parentcategory
        label: Parent Category
        type: string
        source: asset
        total: false
      - name: total_applications
        label: Asset Count
        type: number
        source: asset
        total: true
      - name: total_originalbookvalue
        label: Asset Book Value
        type: number
        source: asset
        total: true
    searchParams:
      - name: parentcategory
        label: Parent Category
        type: singlevaluelist
        pattern: 'list://LAND:Land,BUILDING:Building,SERVICE:Service,IT:IT,VEHICLE:Vehicle,OTHER:Other'
        source: asset
        wrapper: true
        isMandatory: false
        searchClause: AND a.parentcategory = $parentcategory
      - name: fromDate
        label: FromDate
        type: epoch
        source: asset
        isMandatory: false
        searchClause: AND created_time >= $fromDate
      - name: toDate
        label: ToDate
        type: epoch
        source: asset
        isMandatory: false
        searchClause: AND created_time <= $toDate
    query: >
      SELECT 
        a.parentcategory as parentcategory,
        COUNT(*) AS total_applications,
        SUM(a.originalbookvalue) AS total_originalbookvalue
      FROM 
        eg_asset_assetdetails a
      WHERE 
        1=1
    groupby:  
       GROUP BY parentcategory
    orderby: 
        ORDER BY total_originalbookvalue DESC
        
  - reportName: LandReport
    decryptionPathId: ObpsDailyCollectionReport
    summary: Land Assets Report
    version: 1.0.0
    moduleName: rainmaker-asset
    sourceColumns:
      - name: assetid
        label: Asset ID
        type: string
        source: asset
        total: false
        showColumn: true
      - name: assetname
        label: Asset Name
        type: string
        source: asset
        total: false
        showColumn: true
      - name: location
        label: Location
        type: string
        source: asset
        total: false
        showColumn: true
      - name: area
        label: Area
        type: string
        source: asset
        total: false
        showColumn: true
      - name: unitsofmeasurments
        label: Units of Measurement
        type: string
        source: asset
        total: false
        showColumn: true
      - name: landstatus
        label: Land Status
        type: string
        source: asset
        total: false
        showColumn: true
      - name: anybuiltup
        label: Any Built-up
        type: string
        source: asset
        total: false
        showColumn: true
      - name: isitfenced
        label: Is it Fenced
        type: string
        source: asset
        total: false
        showColumn: true
      - name: anyimprovements
        label: Any Improvements
        type: string
        source: asset
        total: false
        showColumn: true
      - name: assetusage
        label: Asset Usage
        type: string
        source: asset
        total: false
        showColumn: true
      - name: depriciationmethod
        label: Depreciation Method
        type: string
        source: asset
        total: false
        showColumn: true
      - name: modeofpossessionoracquisition
        label: Mode of Acquisition
        type: string
        source: asset
        total: false
        showColumn: true
      - name: fromwhomacquired
        label: From Whom Acquired
        type: string
        source: asset
        total: false
        showColumn: true
      - name: valueadded
        label: Value Added
        type: string
        source: asset
        total: false
        showColumn: true
      - name: marketratecircle
        label: Market Rate Circle
        type: string
        source: asset
        total: false
        showColumn: true
      - name: marketrateevaluation
        label: Market Rate Evaluation
        type: string
        source: asset
        total: false
        showColumn: true
      - name: improvemnetdetails
        label: Improvement Details
        type: string
        source: asset
        total: false
        showColumn: true
      - name: depriciationrate
        label: Depreciation Rate
        type: string
        source: asset
        total: false
        showColumn: true
      - name: acquistiondate
        label: Acquisition Date
        type: epoch
        source: asset
        total: false
        showColumn: true
      - name: improvementdate
        label: Improvement Date
        type: epoch
        source: asset
        total: false
        showColumn: true
      - name: dateofpossession
        label: Date of Possession
        type: epoch
        source: asset
        total: false
        showColumn: true
      - name: dateofdeedexecution
        label: Date of Deed Execution
        type: epoch
        source: asset
        total: false
        showColumn: true
      - name: costofacquiringland
        label: Cost of Acquiring Land
        type: number
        source: asset
        total: false
        showColumn: true
      - name: improvementcost
        label: Improvement Cost
        type: string
        source: asset
        total: false
        showColumn: true
      - name: totalcost
        label: Total Cost
        type: number
        source: asset
        total: true
        showColumn: true
    searchParams:
      - name: fromDate
        label: FromDate
        type: epoch
        source: asset
        isMandatory: false
        searchClause: AND a.createdtime >= $fromDate
      - name: toDate
        label: ToDate
        type: epoch
        source: asset
        isMandatory: false
        searchClause: AND a.createdtime <= $toDate
    query: >
      SELECT 
        a.applicationno as assetid,
        a.name AS assetname,
        CONCAT(
            COALESCE(addr.addressline1, ''), ' ', 
            COALESCE(addr.addressline2, ''), ' ', 
            COALESCE(addr.city, ''), ' ', 
            COALESCE(addr.pincode, '')
        ) AS location,
        a.additionaldetails->>'area' AS area,
        a.additionaldetails->'unitsofMeasurments'->>'value' AS unitsofmeasurments,
        a.additionaldetails->'landStatus'->>'value' AS landstatus,
        a.additionaldetails->'anyBuiltup'->>'value' AS anybuiltup,
        a.additionaldetails->'isitFenced'->>'value' AS isitfenced,
        a.additionaldetails->'anyImprovements'->>'value' AS anyimprovements,
        a.additionaldetails->'assetUsage'->>'value' AS assetusage,
        a.additionaldetails->'depriciationMethod'->>'value' AS depriciationmethod,
        a.additionaldetails->'modeOfPossessionOrAcquisition'->>'value' AS modeofpossessionoracquisition,
        a.additionaldetails->>'fromWhomDeedTaken' AS fromwhomacquired,
        a.additionaldetails->>'valueAdded' AS valueadded,
        a.additionaldetails->>'marketRateCircle' AS marketratecircle,
        a.additionaldetails->>'marketRateEvaluation' AS marketrateevaluation,
        a.additionaldetails->>'improvemnetDetails' AS improvemnetdetails,
        a.additionaldetails->>'depriciationRate' AS depriciationrate,
        CASE WHEN a.additionaldetails->>'acquistionDate' IS NOT NULL 
             THEN TO_TIMESTAMP(a.additionaldetails->>'acquistionDate', 'YYYY-MM-DD')
             ELSE NULL END AS acquistiondate,
        CASE WHEN a.additionaldetails->>'improvementDate' IS NOT NULL 
             THEN TO_TIMESTAMP(a.additionaldetails->>'improvementDate', 'YYYY-MM-DD')
             ELSE NULL END AS improvementdate,
        CASE WHEN a.additionaldetails->>'dateOfPossession' IS NOT NULL 
             THEN TO_TIMESTAMP(a.additionaldetails->>'dateOfPossession', 'YYYY-MM-DD')
             ELSE NULL END AS dateofpossession,
        CASE WHEN a.additionaldetails->>'dateOfDeedExecution' IS NOT NULL 
             THEN TO_TIMESTAMP(a.additionaldetails->>'dateOfDeedExecution', 'YYYY-MM-DD')
             ELSE NULL END AS dateofdeedexecution,
        a.acquisitioncost AS costofacquiringland,
        a.additionaldetails->>'improvementCost' AS improvementcost,
        (
            COALESCE(a.originalbookvalue, 0) + 
            COALESCE(NULLIF(a.additionaldetails->>'improvementCost','')::numeric, 0)
        ) AS totalcost
      FROM 
        eg_asset_assetdetails a
      LEFT JOIN 
        eg_asset_addressdetails addr ON a.id = addr.asset_id
      WHERE 
        a.parentcategory = 'LAND'

  - reportName: DetailedBuildingAssetsReport
    decryptionPathId: ObpsDailyCollectionReport
    summary: Detailed Building Assets Report
    version: 1.0.0
    moduleName: rainmaker-asset
    sourceColumns:
      - name: assetid
        label: Asset ID
        type: string
        source: asset
        showColumn: true
      - name: location
        label: Location
        type: string
        source: asset
        showColumn: true
      - name: length
        label: Length
        type: string
        source: asset
        showColumn: true
      - name: breadth
        label: Breadth
        type: string
        source: asset
        showColumn: true
      - name: height
        label: Height
        type: string
        source: asset
        showColumn: true
      - name: floors
        label: No of floors
        type: string
        source: asset
        showColumn: true
      - name: carpet_area
        label: Total carpet area (Sqft)
        type: string
        source: asset
        showColumn: true
      - name: land_area
        label: Plot Area
        type: string
        source: asset
        showColumn: true
      - name: dateofpossession
        label: Date of Possession
        type: epoch
        source: asset
        showColumn: true
      - name: dateofconstruction
        label: Date of Construction
        type: epoch
        source: asset
        showColumn: true
      - name: improvement_date
        label: Improvement Date
        type: epoch
        source: asset
        showColumn: true
      - name: construction_cost
        label: Construction Cost
        type: number
        source: asset
        total: true
        showColumn: true
      - name: improvement
        label: Any Improvements
        type: string
        source: asset
        showColumn: true
      - name: improvement_cost
        label: Improvement Cost
        type: number
        source: asset
        total: true
        showColumn: true
      - name: total_cost
        label: Total Cost
        type: number
        source: asset
        total: true
        showColumn: true
      - name: depreciation_method
        label: Depreciation Method
        type: string
        source: asset
        showColumn: true
      - name: depriciation_rate
        label: Depreciation Rate
        type: string
        source: asset
        showColumn: true
      - name: from_whom_acquired
        label: From Whom Deed Taken
        type: string
        source: asset
        showColumn: true
      - name: modeofacquisition
        label: Mode of Acquisition
        type: string
        source: asset
        showColumn: true
      - name: current_use
        label: Asset Usage
        type: string
        source: asset
        showColumn: true
      - name: market_value
        label: Market Rate
        type: number
        source: asset
        total: true
        showColumn: true
      - name: market_rate_circle
        label: Market Rate Circle
        type: string
        source: asset
        showColumn: true
      - name: market_rate_evaluation
        label: Market Rate Evaluation
        type: string
        source: asset
        showColumn: true
    searchParams:
      - name: fromDate
        label: From Date
        type: epoch
        source: asset
        isMandatory: false
        searchClause: AND b.createdtime >= $fromDate
      - name: toDate
        label: To Date
        type: epoch
        source: asset
        isMandatory: false
        searchClause: AND b.createdtime <= $toDate
    query: >
      SELECT
        b.applicationno AS assetid,
        CONCAT(
            COALESCE(addr.addressline1, ''), ' ',
            COALESCE(addr.addressline2, ''), ' ',
            COALESCE(addr.city, ''), ' ',
            COALESCE(addr.pincode, '')
        ) AS location,
        split_part(b.additionaldetails->>'dimensions', 'x', 1) AS length,
        split_part(b.additionaldetails->>'dimensions', 'x', 2) AS breadth,
        split_part(b.additionaldetails->>'dimensions', 'x', 3) AS height,
        b.additionaldetails->>'floorNo' AS floors,
        b.additionaldetails->>'totalCarpetArea' AS carpet_area,
        b.additionaldetails->>'plotArea' AS land_area,
        CASE WHEN b.additionaldetails->>'dateOfPossession' IS NOT NULL
             THEN TO_TIMESTAMP(b.additionaldetails->>'dateOfPossession', 'YYYY-MM-DD')
             ELSE NULL END AS dateofpossession,
        CASE WHEN b.additionaldetails->>'dateOfConstruction' IS NOT NULL
             THEN TO_TIMESTAMP(b.additionaldetails->>'dateOfConstruction', 'YYYY-MM-DD')
             ELSE NULL END AS dateofconstruction,
        CASE WHEN b.additionaldetails->>'improvementDate' IS NOT NULL
             THEN TO_TIMESTAMP(b.additionaldetails->>'improvementDate', 'YYYY-MM-DD')
             ELSE NULL END AS improvement_date,
        COALESCE(b.acquisitioncost, 0) AS construction_cost,
        COALESCE(b.additionaldetails->'anyImprovements'->>'code') AS improvement,
        COALESCE(NULLIF(b.additionaldetails->>'improvementCost','')::numeric, 0) AS improvement_cost,
        (COALESCE(b.acquisitioncost, 0) + COALESCE(NULLIF(b.additionaldetails->>'improvementCost','')::numeric, 0)) AS total_cost,
        COALESCE(b.additionaldetails->'depriciationMethod'->>'code') AS depreciation_method,
        b.additionaldetails->>'depriciationRate' AS depriciation_rate,
        b.additionaldetails->>'fromWhomDeedTaken' AS from_whom_acquired,
        b.additionaldetails->'modeOfPossessionOrAcquisition'->>'code' AS modeofacquisition,
        b.additionaldetails->'assetUsage'->>'code' AS current_use,
        COALESCE(NULLIF(b.additionaldetails->>'marketRate','')::numeric, 0) AS market_value,
        b.additionaldetails->>'marketRateCircle' AS market_rate_circle,
        b.additionaldetails->>'marketRateEvaluation' AS market_rate_evaluation
      FROM
        eg_asset_assetdetails b
      LEFT JOIN
        eg_asset_addressdetails addr ON b.id = addr.asset_id
      WHERE
        b.parentcategory = 'BUILDING'
